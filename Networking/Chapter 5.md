# Chapter 5 传输层

应用层 HTTP HTTPS FTP DNS SMTP PoP3 RDP

传输层 TCP UDP

网络层 IP（RIP，OSPF，BGP）ICMP IGMP ARP

## TCP

- 分段
- 编号
- 流量控制
- 建立会话

## UDP

- 一个数据包就能完成数据通信
- 不建立会话
- 多播

## 传输层和应用层之间的关系

http=TCP+80

https=TCP+443

ftp=TCP+21

SMTP=TCP+25

POP3=TCP+110

RDP=TCP+3389

SQL=TCP+1433

DNS=UDP+53 or TCP+53

## 应用层协议和服务的关系

服务运行后在TCP或UDP的某个端口侦听客户端的请求

用端口来定位服务，用ip地址来定位计算机

## TCP协议

点到点通讯：ip地址+端口=套接字

可靠传输：自动重传请求ARQ

停止等待协议

发送丢失：发送过程中如果报文出现丢失，发送端等待一个来回时间，没有收到确认消息则会重传，接收端丢弃不完整的包

确认丢失：发送端等待一个来回时间，重传，接收端丢掉上一个报文

确认迟到：后续收到确认消息，但是已经重传并且收到重传的确认消息，则什么也不做

窗口滑动：固定一个窗口大小进行传输，窗口内的数据可以发送和接收，如果最左边的收到ack，就窗口右移一位

累计确认：接收窗口只对收到的最后一个按顺序到达的字节进行确认

流量控制

网络拥塞